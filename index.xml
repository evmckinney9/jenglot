<?xml version="1.0" encoding="UTF-8"?>
<rss  xmlns:atom="http://www.w3.org/2005/Atom" 
      xmlns:media="http://search.yahoo.com/mrss/" 
      xmlns:content="http://purl.org/rss/1.0/modules/content/" 
      xmlns:dc="http://purl.org/dc/elements/1.1/" 
      version="2.0">
<channel>
<title>Evan&#39;s Blog</title>
<link>https://blog.evm9.dev/index.html</link>
<atom:link href="https://blog.evm9.dev/index.xml" rel="self" type="application/rss+xml"/>
<description>A blog about quantum computing, programming, and other things.</description>
<generator>quarto-1.3.450</generator>
<lastBuildDate>Thu, 19 Oct 2023 00:00:00 GMT</lastBuildDate>
<item>
  <title>Second Post</title>
  <dc:creator>Evan McKinney</dc:creator>
  <link>https://blog.evm9.dev/posts/depth/index.html</link>
  <description><![CDATA[ 




<div class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> qiskit.transpiler.coupling <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> CouplingMap</span>
<span id="cb1-2"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> numpy <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> np</span>
<span id="cb1-3"></span>
<span id="cb1-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Import from Qiskit Aer noise module</span></span>
<span id="cb1-5"></span>
<span id="cb1-6"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> mirror_gates.noisy_fidelity <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> get_noisy_fidelity</span>
<span id="cb1-7"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> tqdm <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> tqdm</span>
<span id="cb1-8"></span>
<span id="cb1-9"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> qiskit.circuit.random <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> random_circuit</span>
<span id="cb1-10"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> matplotlib.pyplot <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> plt</span>
<span id="cb1-11"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> numpy <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> np</span>
<span id="cb1-12"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> qiskit.circuit.library <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> QFT</span>
<span id="cb1-13"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> qiskit.transpiler <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> CouplingMap</span>
<span id="cb1-14"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> mirror_gates.noisy_fidelity <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> T1, T2</span></code></pre></div>
</div>
<div class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1">N <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">8</span></span>
<span id="cb2-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># coupling_map = CouplingMap.from_full(N)</span></span>
<span id="cb2-3">coupling_map <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> CouplingMap.from_line(N)</span>
<span id="cb2-4"></span>
<span id="cb2-5">data1 <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> []</span>
<span id="cb2-6"></span>
<span id="cb2-7"><span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span> i <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> tqdm(<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">range</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>)):</span>
<span id="cb2-8">    qc <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> random_circuit(N, i, max_operands<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, measure<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="va" style="color: #111111;
background-color: null;
font-style: inherit;">False</span>)</span>
<span id="cb2-9">    fid, duration, transp, expected_fid <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> get_noisy_fidelity(qc, coupling_map)</span>
<span id="cb2-10">    data1.append((i, duration, fid))  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Added depth (i) here</span></span></code></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>  0%|          | 0/25 [00:00&lt;?, ?it/s]  4%|▍         | 1/25 [00:00&lt;00:15,  1.52it/s]  8%|▊         | 2/25 [00:01&lt;00:19,  1.18it/s] 12%|█▏        | 3/25 [00:02&lt;00:19,  1.15it/s] 16%|█▌        | 4/25 [00:03&lt;00:18,  1.15it/s] 20%|██        | 5/25 [00:04&lt;00:18,  1.09it/s] 24%|██▍       | 6/25 [00:05&lt;00:18,  1.03it/s] 28%|██▊       | 7/25 [00:06&lt;00:18,  1.02s/it] 32%|███▏      | 8/25 [00:07&lt;00:18,  1.08s/it] 36%|███▌      | 9/25 [00:09&lt;00:18,  1.16s/it] 40%|████      | 10/25 [00:10&lt;00:17,  1.20s/it] 44%|████▍     | 11/25 [00:11&lt;00:17,  1.27s/it] 48%|████▊     | 12/25 [00:13&lt;00:17,  1.32s/it] 52%|█████▏    | 13/25 [00:14&lt;00:16,  1.35s/it] 56%|█████▌    | 14/25 [00:16&lt;00:15,  1.40s/it] 60%|██████    | 15/25 [00:17&lt;00:14,  1.45s/it] 64%|██████▍   | 16/25 [00:19&lt;00:13,  1.53s/it] 68%|██████▊   | 17/25 [00:21&lt;00:13,  1.63s/it] 72%|███████▏  | 18/25 [00:23&lt;00:11,  1.67s/it] 76%|███████▌  | 19/25 [00:25&lt;00:10,  1.75s/it] 80%|████████  | 20/25 [00:27&lt;00:09,  1.85s/it] 84%|████████▍ | 21/25 [00:29&lt;00:07,  1.94s/it] 88%|████████▊ | 22/25 [00:31&lt;00:06,  2.11s/it] 92%|█████████▏| 23/25 [00:33&lt;00:04,  2.12s/it] 96%|█████████▌| 24/25 [00:36&lt;00:02,  2.12s/it]100%|██████████| 25/25 [00:38&lt;00:00,  1.54s/it]</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Expected fidelity: 9.60821465974009e-17
Expected fidelity: 6.52779751009869e-10
Expected fidelity: 1.5537993518317284e-07
Expected fidelity: 1.487574536904077e-06
Expected fidelity: 3.291008796328393e-05
Expected fidelity: 4.646880900392177e-05
Expected fidelity: 0.00031885528474234146
Expected fidelity: 0.0009914552912741671
Expected fidelity: 0.002265137938156348
Expected fidelity: 0.00474708453201627
Expected fidelity: 0.005742519985323932
Expected fidelity: 0.012303325377327416
Expected fidelity: 0.014502353992713901
Expected fidelity: 0.01696102593499301
Expected fidelity: 0.030367935062946428
Expected fidelity: 0.044957026811720244
Expected fidelity: 0.04889008093421703
Expected fidelity: 0.08643001927870636
Expected fidelity: 0.09467141196821131
Expected fidelity: 0.14829149077067763
Expected fidelity: 0.1370878899752673
Expected fidelity: 0.1723881232610031
Expected fidelity: 0.16047253150531207
Expected fidelity: 0.22566044135606483
Expected fidelity: 0.19601552561410554</code></pre>
</div>
</div>
<div class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># sort by duration</span></span>
<span id="cb5-2">data1 <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">sorted</span>(data1, key<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">lambda</span> x: x[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>])</span>
<span id="cb5-3">depths_sorted, durations_sorted, fidelities_sorted <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">zip</span>(<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span>data1)</span>
<span id="cb5-4"></span>
<span id="cb5-5">fig, ax1 <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> plt.subplots()</span>
<span id="cb5-6"></span>
<span id="cb5-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Plotting the fidelity vs. duration (main line)</span></span>
<span id="cb5-8">ax1.set_xlabel(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Duration"</span>)</span>
<span id="cb5-9">ax1.set_ylabel(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Fidelity"</span>)</span>
<span id="cb5-10">ax1.plot(durations_sorted, fidelities_sorted, label<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Fidelity"</span>)</span>
<span id="cb5-11"></span>
<span id="cb5-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Setting the secondary x-axis for the depth of the random circuit</span></span>
<span id="cb5-13">ax2 <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> ax1.twiny()</span>
<span id="cb5-14">ax2.set_xlabel(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Depth of Random Circuit"</span>)</span>
<span id="cb5-15">ax2.set_xticks(durations_sorted)</span>
<span id="cb5-16">ax2.set_xticklabels(depths_sorted)</span>
<span id="cb5-17"></span>
<span id="cb5-18">n_qubits <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> N</span>
<span id="cb5-19">duration_samples <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> np.linspace(</span>
<span id="cb5-20">    <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">min</span>(durations_sorted), <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">max</span>(durations_sorted), <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">500</span></span>
<span id="cb5-21">)</span>
<span id="cb5-22">decay_factor <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> [(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> T1 <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> T2) <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> duration <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span> duration <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> duration_samples]</span>
<span id="cb5-23">single_qubit_fidelity <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> [np.exp(<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>factor) <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span> factor <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> decay_factor]</span>
<span id="cb5-24">total_fidelity <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> [fidelity<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">**</span>n_qubits <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span> fidelity <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> single_qubit_fidelity]</span>
<span id="cb5-25">label_string <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="vs" style="color: #20794D;
background-color: null;
font-style: inherit;">r"$\left( e^{(-D/T_1 -D/T_2)} \right)^</span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{N}</span><span class="vs" style="color: #20794D;
background-color: null;
font-style: inherit;">$"</span></span>
<span id="cb5-26"></span>
<span id="cb5-27">ax1.plot(duration_samples, total_fidelity, label<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>label_string, linestyle<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"--"</span>)</span>
<span id="cb5-28">ax1.legend()</span>
<span id="cb5-29"></span>
<span id="cb5-30"></span>
<span id="cb5-31">plt.title(</span>
<span id="cb5-32">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Random Circuit (8-qubits) Fidelity vs Duration with Circuit Depth Reference"</span></span>
<span id="cb5-33">)</span>
<span id="cb5-34">plt.tight_layout()  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Adjust layout to prevent overlap</span></span>
<span id="cb5-35">plt.show()</span></code></pre></div>
<div class="cell-output cell-output-display">
<p><img src="https://blog.evm9.dev/posts/depth/index_files/figure-html/cell-4-output-1.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="47">
<div class="sourceCode cell-code" id="cb6" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1">N <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">8</span></span>
<span id="cb6-2">coupling_map <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> CouplingMap.from_full(N)</span>
<span id="cb6-3">data2 <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> []</span>
<span id="cb6-4"></span>
<span id="cb6-5"><span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span> i <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> tqdm(<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">range</span>(<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, N <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>)):</span>
<span id="cb6-6">    qc <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> QFT(i)</span>
<span id="cb6-7">    fid, duration, transp <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> get_noisy_fidelity(qc, coupling_map)</span>
<span id="cb6-8">    data2.append((i, duration, fid))</span></code></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>  0%|          | 0/7 [00:00&lt;?, ?it/s]100%|██████████| 7/7 [00:14&lt;00:00,  2.06s/it]</code></pre>
</div>
</div>
<div class="cell" data-execution_count="49">
<div class="sourceCode cell-code" id="cb8" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># sort by duration</span></span>
<span id="cb8-2">data2 <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">sorted</span>(data2, key<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">lambda</span> x: x[<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span>])</span>
<span id="cb8-3">sizes_sorted, durations_sorted, fidelities_sorted <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">zip</span>(<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span>data2)</span>
<span id="cb8-4">fig, ax1 <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> plt.subplots()</span>
<span id="cb8-5"></span>
<span id="cb8-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Plotting the fidelity vs. duration (main line)</span></span>
<span id="cb8-7">ax1.set_xlabel(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Duration"</span>)</span>
<span id="cb8-8">ax1.set_ylabel(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Fidelity"</span>)</span>
<span id="cb8-9">ax1.plot(durations_sorted, fidelities_sorted, label<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Fidelity"</span>)</span>
<span id="cb8-10">ax1.tick_params(axis<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"y"</span>)</span>
<span id="cb8-11"></span>
<span id="cb8-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Setting the secondary x-axis for the size of QFT</span></span>
<span id="cb8-13">ax2 <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> ax1.twiny()</span>
<span id="cb8-14">ax2.set_xlabel(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Size of QFT"</span>)</span>
<span id="cb8-15">ax2.set_xticks(durations_sorted)</span>
<span id="cb8-16">ax2.set_xticklabels(sizes_sorted)</span>
<span id="cb8-17">ax2.tick_params(axis<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"x"</span>)</span>
<span id="cb8-18"></span>
<span id="cb8-19"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Adjusting the reference line calculation</span></span>
<span id="cb8-20">unique_sizes <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">list</span>(<span class="bu" style="color: null;
background-color: null;
font-style: inherit;">set</span>(sizes_sorted))</span>
<span id="cb8-21">reference_y_total <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> []</span>
<span id="cb8-22">duration_samples_total <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> []</span>
<span id="cb8-23"></span>
<span id="cb8-24"><span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span> size <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> unique_sizes:</span>
<span id="cb8-25">    min_duration <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">min</span>(</span>
<span id="cb8-26">        [</span>
<span id="cb8-27">            duration</span>
<span id="cb8-28">            <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span> size_curr, duration <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">zip</span>(sizes_sorted, durations_sorted)</span>
<span id="cb8-29">            <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">if</span> size_curr <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> size</span>
<span id="cb8-30">        ]</span>
<span id="cb8-31">    )</span>
<span id="cb8-32">    max_duration <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">max</span>(</span>
<span id="cb8-33">        [</span>
<span id="cb8-34">            duration</span>
<span id="cb8-35">            <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span> size_curr, duration <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> <span class="bu" style="color: null;
background-color: null;
font-style: inherit;">zip</span>(sizes_sorted, durations_sorted)</span>
<span id="cb8-36">            <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">if</span> size_curr <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">==</span> size</span>
<span id="cb8-37">        ]</span>
<span id="cb8-38">    )</span>
<span id="cb8-39">    duration_samples <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> np.linspace(min_duration, max_duration, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">100</span>)</span>
<span id="cb8-40">    reference_y <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> [</span>
<span id="cb8-41">        np.exp(<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span>size <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> duration <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> (T1 <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> T2)) <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span> duration <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> duration_samples</span>
<span id="cb8-42">    ]</span>
<span id="cb8-43"></span>
<span id="cb8-44">    reference_y_total.extend(reference_y)</span>
<span id="cb8-45">    duration_samples_total.extend(duration_samples)</span>
<span id="cb8-46"></span>
<span id="cb8-47">ax1.plot(</span>
<span id="cb8-48">    duration_samples_total,</span>
<span id="cb8-49">    reference_y_total,</span>
<span id="cb8-50">    label<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"e^{-nD / (T_1+T_2)}"</span>,</span>
<span id="cb8-51">    linestyle<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"--"</span>,</span>
<span id="cb8-52">)</span>
<span id="cb8-53"></span>
<span id="cb8-54"></span>
<span id="cb8-55">plt.title(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"n-QFT Fidelity vs Duration with QFT Size Reference"</span>)</span>
<span id="cb8-56">plt.tight_layout()  <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Adjust layout to prevent overlap</span></span>
<span id="cb8-57">plt.show()</span></code></pre></div>
<div class="cell-output cell-output-display">
<p><img src="https://blog.evm9.dev/posts/depth/index_files/figure-html/cell-6-output-1.png" class="img-fluid"></p>
</div>
</div>



 ]]></description>
  <category>jupyter</category>
  <category>Qiskit</category>
  <guid>https://blog.evm9.dev/posts/depth/index.html</guid>
  <pubDate>Thu, 19 Oct 2023 00:00:00 GMT</pubDate>
  <media:content url="https://blog.evm9.dev/posts/depth/figures/cover.png" medium="image" type="image/png" height="103" width="144"/>
</item>
<item>
  <title>First Post</title>
  <dc:creator>Evan McKinney</dc:creator>
  <link>https://blog.evm9.dev/posts/asymptote/index.html</link>
  <description><![CDATA[ 




<section id="testing-header-update" class="level1">
<h1>Testing Header Update !!!</h1>
<p>Here is some info. Here is some more info.</p>
<div class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb1" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># !pip uninstall -y matplotlib &amp;&amp; pip install matplotlib==3.7.2</span></span></code></pre></div>
</div>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Warning
</div>
</div>
<div class="callout-body-container callout-body">
<p>Temp fix for matplotlib versioning.</p>
</div>
</div>
<div class="callout callout-style-default callout-note no-icon callout-titled" title="QSP circuit">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
QSP circuit
</div>
</div>
<div class="callout-body-container callout-body">
<p><img src="https://latex.codecogs.com/png.latex?%5Cbegin%7Balign%7D%0AU*%5Cphi%20=S(%5Cphi_0)%5Cprod*%7Bi=1%7D%5Ed%20R(a)%20S(%5Cphi*i)%20=%20S(%5Cphi_0)R(a)%20S(%5Cphi_1)%20R(a)%5Cdots%20S(%5Cphi*%7Bd-1%7D)%20R(a)%20S(%5Cphi_d)%0A%5Cend%7Balign%7D"></p>
</div>
</div>
<div class="cell" data-execution_count="9">
<div class="sourceCode cell-code" id="cb2" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># define gateset as any basis with coordinates (x,y, 0)</span></span>
<span id="cb2-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># want to find set of 2 gates that give largest disjoint volume</span></span>
<span id="cb2-3"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> monodromy.haar <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> gates_to_haar, expected_cost</span>
<span id="cb2-4"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> monodromy.render <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> _plot_coverage_set</span>
<span id="cb2-5"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> monodromy.coverage <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> gates_to_coverage, print_coverage_set</span>
<span id="cb2-6"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> monodromy.haar <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> gates_to_haar, expected_cost</span>
<span id="cb2-7"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> monodromy.render <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> _plot_coverage_set</span>
<span id="cb2-8"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> monodromy.coverage <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> gates_to_coverage, print_coverage_set</span>
<span id="cb2-9"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> numpy <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> np</span>
<span id="cb2-10"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> matplotlib.pyplot <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> plt</span>
<span id="cb2-11"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> tqdm <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> tqdm</span>
<span id="cb2-12"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> qiskit.circuit.library <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> iSwapGate</span>
<span id="cb2-13"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> time</span></code></pre></div>
</div>
<div class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb3" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># g = canonical_gate(*np.array([0.25, 0.25, 0])).full()</span></span>
<span id="cb3-2"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># g = UnitaryGate(g)</span></span>
<span id="cb3-3"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># g.name = "g"</span></span>
<span id="cb3-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># print(gates_to_haar(g))</span></span>
<span id="cb3-5"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># _ = gates_to_coverage_plot(g)</span></span></code></pre></div>
</div>
<div class="cell" data-execution_count="11">
<div class="sourceCode cell-code" id="cb4" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1">gp <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span></span>
<span id="cb4-2">g <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> iSwapGate().power(gp)</span>
<span id="cb4-3">hp <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span></span>
<span id="cb4-4">h <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> iSwapGate().power(hp)</span>
<span id="cb4-5">gates <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> [(g, gp), (h, hp)]</span></code></pre></div>
</div>
<section id="making-sure-monodromy-works-for-a-basic-example." class="level3">
<h3 class="anchored" data-anchor-id="making-sure-monodromy-works-for-a-basic-example.">Making sure monodromy works for a basic example.</h3>
<p>Test with a single gate compared to a basis with two basis gates.</p>
<div class="cell" data-execution_count="12">
<div class="sourceCode cell-code" id="cb5" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># print(gates_to_haar(g, h))</span></span>
<span id="cb5-2">coverage <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> gates_to_coverage(<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span>[g], costs<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>[gp])</span>
<span id="cb5-3"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(expected_cost(coverage))</span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>0.9598936659817359</code></pre>
</div>
</div>
<div class="cell" data-execution_count="13">
<div class="sourceCode cell-code" id="cb7" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># print(gates_to_haar(g, h))</span></span>
<span id="cb7-2">coverage <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> gates_to_coverage(<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span>[g, h], costs<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>[gp, hp])</span>
<span id="cb7-3"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(expected_cost(coverage))</span>
<span id="cb7-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># print_coverage_set(coverage)</span></span></code></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>0.8787242759647856</code></pre>
</div>
</div>
<p>See Figure&nbsp;1 to see the coverage set.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1">_plot_coverage_set(coverage)</span></code></pre></div>
<div class="cell-output cell-output-display">
<div id="fig-coverage1" class="quarto-figure quarto-figure-center anchored">
<figure class="figure">
<p><img src="https://blog.evm9.dev/posts/asymptote/index_files/figure-html/fig-coverage1-output-1.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Figure&nbsp;1: Coverage set for a mixed basis.</figcaption>
</figure>
</div>
</div>
</div>
</section>
<section id="calculate-asymptotic-haar-score-for-iswap-basis." class="level2">
<h2 class="anchored" data-anchor-id="calculate-asymptotic-haar-score-for-iswap-basis.">Calculate asymptotic Haar score for iSWAP basis.</h2>
<div class="cell" data-execution_count="15">
<div class="sourceCode cell-code" id="cb10" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Hardcoded list of denominators: powers of 2 and primes up to 64</span></span>
<span id="cb10-2">denominators <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> [<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">2</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">4</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">8</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">16</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">32</span>, <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">64</span>]</span>
<span id="cb10-3">denominators <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+=</span> [</span>
<span id="cb10-4">    <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">3</span>,</span>
<span id="cb10-5">    <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">5</span>,</span>
<span id="cb10-6">    <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">7</span>,</span>
<span id="cb10-7">    <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">11</span>,</span>
<span id="cb10-8">    <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">13</span>,</span>
<span id="cb10-9">    <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">17</span>,</span>
<span id="cb10-10">    <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">19</span>,</span>
<span id="cb10-11">    <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">23</span>,</span>
<span id="cb10-12">    <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">29</span>,</span>
<span id="cb10-13">    <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">31</span>,</span>
<span id="cb10-14">    <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">37</span>,</span>
<span id="cb10-15">    <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">41</span>,</span>
<span id="cb10-16">    <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">43</span>,</span>
<span id="cb10-17">    <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">47</span>,</span>
<span id="cb10-18">    <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">53</span>,</span>
<span id="cb10-19">    <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">59</span>,</span>
<span id="cb10-20">    <span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">61</span>,</span>
<span id="cb10-21">]</span>
<span id="cb10-22">fractional_powers <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> [<span class="dv" style="color: #AD0000;
background-color: null;
font-style: inherit;">1</span> <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> d <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span> d <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> denominators]</span>
<span id="cb10-23"></span>
<span id="cb10-24"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Lists to store results and runtimes</span></span>
<span id="cb10-25">haar_scores <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> []</span>
<span id="cb10-26">decomposition_costs <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> []</span>
<span id="cb10-27">runtimes <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> []</span>
<span id="cb10-28"></span>
<span id="cb10-29"><span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span> gp <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> tqdm(fractional_powers):</span>
<span id="cb10-30">    start_time <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> time.time()</span>
<span id="cb10-31"></span>
<span id="cb10-32">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Create the iSWAP gate powered by the fractional power</span></span>
<span id="cb10-33">    g <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> iSwapGate().power(gp)</span>
<span id="cb10-34"></span>
<span id="cb10-35">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Compute the Haar score</span></span>
<span id="cb10-36">    haar_score <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> gates_to_haar(g)</span>
<span id="cb10-37">    haar_scores.append(haar_score)</span>
<span id="cb10-38"></span>
<span id="cb10-39">    <span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Compute the expected decomposition cost</span></span>
<span id="cb10-40">    coverage <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> gates_to_coverage(g, costs<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span>[gp])</span>
<span id="cb10-41">    cost <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> expected_cost(coverage)</span>
<span id="cb10-42">    decomposition_costs.append(cost)</span>
<span id="cb10-43"></span>
<span id="cb10-44">    end_time <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> time.time()</span>
<span id="cb10-45">    runtime <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> end_time <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">-</span> start_time</span>
<span id="cb10-46">    runtimes.append(runtime)</span></code></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>  0%|          | 0/23 [00:00&lt;?, ?it/s]100%|██████████| 23/23 [28:07&lt;00:00, 73.37s/it] </code></pre>
</div>
</div>
<div class="cell" data-execution_count="23">
<div class="sourceCode cell-code" id="cb12" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Plot the results</span></span>
<span id="cb12-2">fig, ax1 <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> plt.subplots()</span>
<span id="cb12-3"></span>
<span id="cb12-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Twin the axes for decomposition costs</span></span>
<span id="cb12-5">ax2 <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> ax1.twinx()</span>
<span id="cb12-6"></span>
<span id="cb12-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># # Twin the axes again for runtimes</span></span>
<span id="cb12-8"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ax3 = ax1.twinx()</span></span>
<span id="cb12-9"></span>
<span id="cb12-10"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Move the last Y axis to the right</span></span>
<span id="cb12-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ax3.spines["right"].set_position(("outward", 60))</span></span>
<span id="cb12-12"></span>
<span id="cb12-13"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Plot Haar scores</span></span>
<span id="cb12-14">ax1.plot(denominators, haar_scores, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"g-o"</span>)</span>
<span id="cb12-15">ax1.set_xlabel(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Denominator of Fractional Power"</span>)</span>
<span id="cb12-16">ax1.set_ylabel(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Haar Score"</span>, color<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"g"</span>)</span>
<span id="cb12-17"></span>
<span id="cb12-18"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Plot decomposition costs</span></span>
<span id="cb12-19">ax2.plot(denominators, decomposition_costs, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"b-o"</span>)</span>
<span id="cb12-20">ax2.set_ylabel(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Expected Decomposition Cost"</span>, color<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"b"</span>)</span>
<span id="cb12-21"></span>
<span id="cb12-22"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># # Plot runtimes</span></span>
<span id="cb12-23"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ax3.plot(denominators, runtimes, "r--o")</span></span>
<span id="cb12-24"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># ax3.set_ylabel("Runtime (seconds)", color="r")</span></span>
<span id="cb12-25"></span>
<span id="cb12-26">plt.title(</span>
<span id="cb12-27">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"iSWAP Fractional Power vs. Haar Score, Decomposition Cost &amp; Runtime"</span></span>
<span id="cb12-28">)</span>
<span id="cb12-29">plt.show()</span></code></pre></div>
<div class="cell-output cell-output-display">
<p><img src="https://blog.evm9.dev/posts/asymptote/index_files/figure-html/cell-10-output-1.png" class="img-fluid"></p>
</div>
</div>
<div class="cell" data-execution_count="25">
<div class="sourceCode cell-code" id="cb13" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> numpy <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> np</span>
<span id="cb13-2"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">from</span> scipy.optimize <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> curve_fit</span>
<span id="cb13-3"><span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">import</span> matplotlib.pyplot <span class="im" style="color: #00769E;
background-color: null;
font-style: inherit;">as</span> plt</span>
<span id="cb13-4"></span>
<span id="cb13-5"></span>
<span id="cb13-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Define the reciprocal function</span></span>
<span id="cb13-7"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">def</span> reciprocal(x, a, b):</span>
<span id="cb13-8">    <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">return</span> a <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> b <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">/</span> x</span>
<span id="cb13-9"></span>
<span id="cb13-10"></span>
<span id="cb13-11"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Fit the data using curve_fit</span></span>
<span id="cb13-12">params, covariance <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> curve_fit(reciprocal, denominators, decomposition_costs)</span>
<span id="cb13-13"></span>
<span id="cb13-14"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Extract the fitted parameters</span></span>
<span id="cb13-15">a, b <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> params</span>
<span id="cb13-16"></span>
<span id="cb13-17"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Generate the fitted curve using the extracted parameters</span></span>
<span id="cb13-18">fitted_curve <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> [reciprocal(d, a, b) <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span> d <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> denominators]</span>
<span id="cb13-19"></span>
<span id="cb13-20"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Plot the original data and the fitted curve</span></span>
<span id="cb13-21">plt.plot(denominators, decomposition_costs, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bo"</span>, label<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Original Data"</span>)</span>
<span id="cb13-22">plt.plot(denominators, fitted_curve, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"r-"</span>, label<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Fitted Curve"</span>)</span>
<span id="cb13-23">plt.xlabel(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Denominator of Fractional Power"</span>)</span>
<span id="cb13-24">plt.ylabel(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Expected Decomposition Cost"</span>)</span>
<span id="cb13-25">plt.legend()</span>
<span id="cb13-26">plt.title(</span>
<span id="cb13-27">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"iSWAP Fractional Power vs. Expected Decomposition Cost with Fitted Asymptote"</span></span>
<span id="cb13-28">)</span>
<span id="cb13-29">plt.show()</span>
<span id="cb13-30"></span>
<span id="cb13-31"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"Asymptote (a): </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>a<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-display">
<p><img src="https://blog.evm9.dev/posts/asymptote/index_files/figure-html/cell-11-output-1.png" class="img-fluid"></p>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Asymptote (a): 0.8533496992457048</code></pre>
</div>
</div>
<div class="cell" data-execution_count="18">
<div class="sourceCode cell-code" id="cb15" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Define the linear function</span></span>
<span id="cb15-2"><span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">def</span> linear(x, m, c):</span>
<span id="cb15-3">    <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">return</span> m <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">*</span> x <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">+</span> c</span>
<span id="cb15-4"></span>
<span id="cb15-5"></span>
<span id="cb15-6"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Fit the data using curve_fit</span></span>
<span id="cb15-7">params, _ <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> curve_fit(linear, denominators, haar_scores)</span>
<span id="cb15-8"></span>
<span id="cb15-9"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Extract the fitted parameters</span></span>
<span id="cb15-10">m, c <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> params</span>
<span id="cb15-11"></span>
<span id="cb15-12"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Generate the fitted curve using the extracted parameters</span></span>
<span id="cb15-13">fitted_curve <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> [linear(d, m, c) <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span> d <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> denominators]</span>
<span id="cb15-14"></span>
<span id="cb15-15"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Plot the original data and the fitted curve</span></span>
<span id="cb15-16">plt.plot(denominators, haar_scores, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"g-o"</span>, label<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Original Data"</span>)</span>
<span id="cb15-17">plt.plot(denominators, fitted_curve, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"r-"</span>, label<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Fitted Line"</span>)</span>
<span id="cb15-18">plt.xlabel(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Denominator of Fractional Power"</span>)</span>
<span id="cb15-19">plt.ylabel(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Haar Score"</span>)</span>
<span id="cb15-20">plt.legend()</span>
<span id="cb15-21">plt.title(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"iSWAP Fractional Power vs. Haar Score with Fitted Line"</span>)</span>
<span id="cb15-22">plt.show()</span>
<span id="cb15-23"></span>
<span id="cb15-24"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"Slope (m): </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>m<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span>
<span id="cb15-25"><span class="bu" style="color: null;
background-color: null;
font-style: inherit;">print</span>(<span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">f"Intercept (c): </span><span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">{</span>c<span class="sc" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">}</span><span class="ss" style="color: #20794D;
background-color: null;
font-style: inherit;">"</span>)</span></code></pre></div>
<div class="cell-output cell-output-display">
<p><img src="https://blog.evm9.dev/posts/asymptote/index_files/figure-html/cell-12-output-1.png" class="img-fluid"></p>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Slope (m): 0.8543795110777335
Intercept (c): 0.457798292267894</code></pre>
</div>
</div>
<div class="cell" data-execution_count="26">
<div class="sourceCode cell-code" id="cb17" style="background: #f1f3f5;"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Extract the fitted parameters</span></span>
<span id="cb17-2">a, b <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> m, c</span>
<span id="cb17-3"></span>
<span id="cb17-4"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Generate the fitted curve using the extracted parameters</span></span>
<span id="cb17-5">fitted_curve <span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span> [reciprocal(d, a, b) <span class="cf" style="color: #003B4F;
background-color: null;
font-style: inherit;">for</span> d <span class="kw" style="color: #003B4F;
background-color: null;
font-style: inherit;">in</span> denominators]</span>
<span id="cb17-6"></span>
<span id="cb17-7"><span class="co" style="color: #5E5E5E;
background-color: null;
font-style: inherit;"># Plot the original data and the fitted curve</span></span>
<span id="cb17-8">plt.plot(denominators, decomposition_costs, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"bo"</span>, label<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Original Data"</span>)</span>
<span id="cb17-9">plt.plot(denominators, fitted_curve, <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"r-"</span>, label<span class="op" style="color: #5E5E5E;
background-color: null;
font-style: inherit;">=</span><span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Fitted Curve"</span>)</span>
<span id="cb17-10">plt.xlabel(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Denominator of Fractional Power"</span>)</span>
<span id="cb17-11">plt.ylabel(<span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"Expected Decomposition Cost"</span>)</span>
<span id="cb17-12">plt.legend()</span>
<span id="cb17-13">plt.title(</span>
<span id="cb17-14">    <span class="st" style="color: #20794D;
background-color: null;
font-style: inherit;">"iSWAP Fractional Power vs. Expected Decomposition Cost with Fitted Asymptote"</span></span>
<span id="cb17-15">)</span>
<span id="cb17-16">plt.show()</span></code></pre></div>
<div class="cell-output cell-output-display">
<p><img src="https://blog.evm9.dev/posts/asymptote/index_files/figure-html/cell-13-output-1.png" class="img-fluid"></p>
</div>
</div>


</section>
</section>

 ]]></description>
  <category>jupyter</category>
  <category>Qiskit</category>
  <guid>https://blog.evm9.dev/posts/asymptote/index.html</guid>
  <pubDate>Wed, 18 Oct 2023 00:00:00 GMT</pubDate>
  <media:content url="https://blog.evm9.dev/posts/asymptote/figures/cover.png" medium="image" type="image/png" height="96" width="144"/>
</item>
</channel>
</rss>
